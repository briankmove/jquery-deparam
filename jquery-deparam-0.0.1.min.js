(function(e){function g(e){return typeof e==="string"}function y(e){var t=n.call(arguments,1);return function(){return e.apply(this,t.concat(n.call(arguments)))}}function b(e){return e.replace(p,"$2")}function w(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function E(n,i,o,a,v){var y,b,w,E,S;if(a!==t){w=o.match(n?p:/^([^#?]*)\??([^#]*)(#?.*)/);S=w[3]||"";if(v===2&&g(a)){b=a.replace(n?h:c,"")}else{E=u(w[2]);a=g(a)?u[n?l:f](a):a;b=v===2?a:v===1?e.extend({},a,E):e.extend({},E,a);b=s(b);if(n){b=b.replace(d,r)}}y=w[1]+(n?m:b||!w[1]?"?":"")+b+S}else{y=i(o!==t?o:location.href)}return y}function S(e,n,r){if(n===t||typeof n==="boolean"){r=n;n=i[e?l:f]()}else{n=g(n)?n.replace(e?h:c,""):n}return u(n,r)}var t,n=Array.prototype.slice,r=decodeURIComponent,i=e.param,s,o,u,a,f="querystring",l="fragment",c=/^.*\?|#.*$/g,h,p,d,v,m;i[f]=y(E,0,w);i[l]=o=y(E,1,b);i.sorted=s=function(t,n){var r=[],s={};e.each(i(t,n).split("&"),function(e,t){var n=t.replace(/(?:%5B|=).*$/,""),i=s[n];if(!i){i=s[n]=[];r.push(n)}i.push(t)});return e.map(r.sort(),function(e){return s[e]}).join("&")};o.noEscape=function(t){t=t||"";var n=e.map(t.split(""),encodeURIComponent);d=new RegExp(n.join("|"),"g")};o.noEscape(",/");o.ajaxCrawlable=function(e){if(e!==t){if(e){h=/^.*(?:#!|#)/;p=/^([^#]*)(?:#!|#)?(.*)$/;m="#!"}else{h=/^.*#/;p=/^([^#]*)#?(.*)$/;m="#"}v=!!e}return v};o.ajaxCrawlable(0);e.deparam=u=function(n,i){var s={},o={"true":!0,"false":!1,"null":null};e.each(n.replace(/\+/g," ").split("&"),function(n,u){var a=u.split("="),f=r(a[0]),l,c=s,h=0,p=f.split("]["),d=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[d])){p[d]=p[d].replace(/\]$/,"");p=p.shift().split("[").concat(p);d=p.length-1}else{d=0}if(a.length===2){l=r(a[1]);if(i){l=l&&!isNaN(l)?+l:l==="undefined"?t:o[l]!==t?o[l]:l}if(d){for(;h<=d;h++){f=p[h]===""?c.length:p[h];c=c[f]=h<d?c[f]||(p[h+1]&&isNaN(p[h+1])?{}:[]):l}}else{if(e.isArray(s[f])){s[f].push(l)}else if(s[f]!==t){s[f]=[s[f],l]}else{s[f]=l}}}else if(f){s[f]=i?t:""}});return s};u[f]=y(S,0);u[l]=a=y(S,1)})(jQuery)